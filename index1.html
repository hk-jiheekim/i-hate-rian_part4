<!doctype html>
<html>
<head>

  <link rel="shortcut icon" href="/파비.ico" type="image/x-icon">
  <link rel="icon" href="/파비.ico" type="image/x-icon">
  <link rel="shortcut icon" href="파비.ico" type="image/x-icon">
  <link rel="icon" href="/파비.ico" type="image/x-icon">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>i hate rain</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/bling.css">
  <link href="https://fonts.googleapis.com/css?family=Jua&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style type="text/css">
    @font-face { font-family: 'BMJUA'; src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/BMJUA.woff') format('woff'); font-weight: normal; font-style: normal; }
    #back{background: url(./back.png); background-size: cover; background-attachment: fixed;}
    body{font-family: 'BMJUA';}

    .nb{animation: nbo 20s ease;}}
    .nb:hover{opacity: 0.3;}
     .mole:hover{opacity: 0.7;}
     #img4{z-index: 9999; width: 12.5%; margin-top:52%; left:87%;  cursor: pointer; position: absolute;}
        #img4:hover{opacity: 0.5;}

     @keyframes nbo{
            from{opacity: 0; }
            to{opacity: 1;  }}

        .of1{position: absolute; width:4%; z-index: 999; margin-top: -1%; left:17%; cursor: pointer;  z-index: 999;}
        .of1:hover{opacity: 0.5;}
  </style>

</head>
<body id="back">
  <div id="ending" class="ending">
      <p id="ending-box"></p>
    </div>
    <div id="ending-bg" class="ending-bg">
    </div>  
  <header>
      
      <h1 class="title">악플러를 잡아주세요!</h1> 
      <h2 style="margin: auto; text-align: center; font-size: 1.7em; margin-top: -2%;" > 빠르게 더블클릭 해주세요</h2>
  </header>
  <div class="main">
    <img src="images/back3.png" style="z-index: 990; position: absolute; width: 70%; left: 13%; margin-top: 5.5%;">
    <img src="images/chat.png" style="z-index: 991; position: absolute; top: 30%; width: 10%; left: 22%; margin-top: 14%; " >
  <a href="./index2.html">  <img class="nb" src="images/next.png" style="z-index: 9999; position: absolute; margin-top: 50%; width: 7%; left: 45%; "></a>
  <a href="https://hk-jiheekim.github.io/i-hate-rain_part1/"><img src="images/logo.png" class="lo" id="img4"></a>
  <img src="images/off.png" id="of" class="of1">
        <audio src="song.mp3" loop id="aa" ></audio>

    </div>

   


    <ul class="whack-a-mole clearfix" style="z-index: 997; position: absolute;" >
       <li class="mole" >
        <img id="1" src="images/chat1.png">
      </li>
      <li class="mole">
        <img id="2" src="images/chat2.png">
      </li>
      <li class="mole">
        <img id="3" src="images/chat3.png">
      </li>
      <li class="mole">
        <img id="4" src="images/chat4.png">
      </li>
      <li class="mole">
        <img id="5" src="images/chat5.png">
      </li>
      <li class="mole">
        <img id="6" src="images/chat6.png">
      </li>
    
  
    </ul>
      <center><div class="btn-wrap" style="z-index: 999; position: absolute;">
        <div class="point-wrap">
        <p id="point-text">Point :</p>
        <p id="count-mole">0</p>
        <p id="count-mole2">/ 10</p>
      </div>
        <button type="button" class="start-btn">시작</button>
      </div>
  </div>
  </center>

  <script type="text/javascript">

    var ofstate ="off";
        of.onclick=function(){
            if(ofstate =="off"){
            of.src = "images/on.png";
            aa.play();
            ofstate = "on";}
            else{
                of.src = "images/off.png";
                aa.pause();
                ofstate = "off";}}

    var moleNumber;
  var randomNum;
  var preNum;

  var startBtn = document.querySelector('.start-btn');

startBtn.addEventListener('click', startMole);

function startMole(){
  startBtn.removeEventListener('click', startMole);
  startBtn.style.color = '#3d3f43';
  getPoint = 0;
  turn = 0;
  setTimeout(showingMole, 1000);

}

function randomHole(){
  randomNum = Math.floor(Math.random() * 6);
  if (preNum !== randomNum && randomNum > 0) {
    preNum = randomNum; 
    return randomNum;
  }
  return randomHole();
 }

function moleActive(num){
    num.classList.add('active');
}
function moleHide(num){
    num.classList.remove('active');
}
var moleCatch = 0;

function showingMole(){
  if(turn < 10){    // 플레이 제한 횟수
    moleNumber = document.getElementById(`${randomHole()}`);
    moleActive(moleNumber);
    moleNumber.addEventListener('click', catchMole);
    moleCatch = setTimeout(seeMOle, 800);
    turn++;
  }else{
    modalEvent();
    startBtn.addEventListener('click', startMole);
    startBtn.textContent = '다시하기';
    startBtn.style.color = '#000000';
  }
}

var cntBox = document.querySelector('#count-mole');
function seeMOle(){
  moleNumber.removeEventListener('click', catchMole);
  moleHide(moleNumber);
  clearTimeout(moleCatch);
  setTimeout(showingMole, 1000);
}

function catchMole(){
  seeMOle();
  clearTimeout(moleCatch);
  getPoint++;
  cntBox.innerHTML = getPoint;
}

var endingBtn = document.querySelector('#ending-bg');
var finalEnding = "finalEnding";

endingBtn.addEventListener('click', hideModal); 

function modalEvent(){
  let point = (getPoint / 10) * 100;
  if (point <= 40){
    ending.children[0].innerHTML = "<span>게임 종료! </span></br>YOUR SCORE IS&nbsp;&nbsp;<span class='last'>" + point + '</span>!' + "</br>파란색을 눌러 다시하기";
  }else{
    ending.children[0].innerHTML = "<span>게임 종료</span></br>YOUR SCORE IS&nbsp;&nbsp;<span class='last'>" + point + '</span>!'+ "<br>하단 버튼을 눌러 다음으로!";
  }
  ending.classList.add(finalEnding);
  endingBtn.classList.add(finalEnding);
}
function hideModal(){
  ending.classList.remove(finalEnding);
  endingBtn.classList.remove(finalEnding);
}
  </script>
</body>
</html>